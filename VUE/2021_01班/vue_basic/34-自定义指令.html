<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>vue使用模板</title>
    <!-- 引入vue -->
    <script src='../js/vue.js'></script>
</head>
<body>
    <!-- 

        一、定义语法：
         (1).局部指令：
                  new Vue({                                            new Vue({
                     directives:{指令名:配置对象}   或         directives{指令名:回调函数}
                  })                                                        })
         (2).全局指令：
                     Vue.directive(指令名,配置对象) 或   Vue.directive(指令名,回调函数)

二、配置对象中常用的3个回调：
         (1).bind：指令与元素成功绑定时调用。
         (2).inserted：指令所在元素被插入页面时调用。
         (3).update：指令所在模板结构被重新解析时调用。

三、备注：
         1.指令定义时不加v-，但使用时要加v-；
         2.指令名如果是多个单词，要使用kebab-case命名方式，不要用camelCase命名
         3.自定义指令内部维护的this表示window对象
     -->
    <!-- 
        需求1：定义一个v-big指令，和v-text功能类似，
            但会把绑定的数值放大10倍。  -- 函数式
        需求2：定义一个v-fbind指令，
            和v-bind功能类似，但可以让其所
            绑定的input元素默认获取焦点。  -- 对象式
     -->
        <!-- 准备一个容器 -->
        <div id='root'>
            <h3>当前n值是：<span v-text="n"></span></h3>
            <h3>放大10倍后的n值是：<span v-big="n"></span></h3>
            <!-- vue不支持驼峰命名的指令 -->
            <h3>放大10倍后的n值是：<span v-big-number="n"></span></h3>
            <button @click="n++">点击n+1</button>
            <hr>
            <input type="text" v-fbind:value="n">
        </div>
        <div id="root02">
            <input type="text" v-fbind:value="x">
        </div>
        <script>
                // 设置为 false 以阻止 vue 在启动时生成生产提示
                Vue.config.productionTip = false;
                // 配置全局指令
                Vue.directive('fbind',{
                                bind(element,binding){
                                    console.log(this);
                                    element.value = binding.value
                                },
                                inserted(element,binding){
                                    element.focus()
                                },
                                update(element,binding){
                                    element.value = binding.value
                                    element.focus()
                                }
                })

                // 创建Vue对象
                new Vue({
                        el: '#root',
                        data: {
                            n:1
                        },
                        directives:{
                            /* 
                                在这里配置自定义指令，以函数的方式
                                函数内部会接收两个参数，element,binding
                                element:表示big所要生效的标签
                                binding：表示所在标签的对象
                                big函数在什么时候被调用？
                                    1.指令与元素成功被绑定时
                                    2.指令所在的模板被重新解析
                            */
                           big(element,binding) {      
                                element.innerText = binding.value * 10
                           },
                           'big-number'(element,binding) {
                            element.innerText = binding.value * 10
                           },
                           
                        //    fbind: {
                        //         bind(element,binding){
                        //             element.value = binding.value
                        //         },
                        //         inserted(element,binding){
                        //             element.focus()
                        //         },
                        //         update(element,binding){
                        //             element.value = binding.value
                        //             element.focus()
                        //         }
                        //    }
                           
                        }
                        
                })
                new Vue({
                    el:"#root02",
                    data:{
                        x:1
                    }
                })
        </script>
</body>
</html>